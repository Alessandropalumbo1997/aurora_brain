#! /usr/bin/env python

import roslib
import rospy
import random
from std_msgs.msg import String
from brain.msg import motor_cortex_msg

class Stepper:

    index = 0
    impulse = 0

    def __init__(self, index):
        self.index = index
        self.impulse = 0

    def set_impulse(self, impulse):
        # -1 -> backward
        # 0 -> stopped
        # 1 -> forward
        self.impulse = impulse

class MotorCortex:

    stepper_motors = [

        Stepper(0), # tongue
        Stepper(1), # jaw
        Stepper(2), # left ear
        Stepper(3), # right ear
        Stepper(4), # tail
        Stepper(5)  # neck

    ]

    msg = motor_cortex_msg()
    msg.stepper_motors = stepper_motors

    pub = rospy.Publisher('steppers', motor_cortex_msg, queue_size=10)

    def steppers_test(self):

        while not rospy.is_shutdown():
            rospy.init_node("motor_cortex", anonymous=True)
            rate = rospy.Rate(2)

            # random.randint(-1, 1)
            self.msg.stepper_motors[0].set_impulse(200)
            self.msg.stepper_motors[1].set_impulse(200)
            self.msg.stepper_motors[2].set_impulse(200)
            # self.msg.stepper_motors[2].set_impulse(random.randint(-1, 1))

            self.pub.publish(self.msg)

            rate.sleep()



if __name__ == '__main__':

    MotorCortex().steppers_test()
