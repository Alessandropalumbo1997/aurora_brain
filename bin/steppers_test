#! /usr/bin/env python

import roslib
import rospy
import random
from std_msgs.msg import String
from brain.msg import motor_cortex_msg

class Stepper:

    name = ""
    impulse = 0

    def __init__(self, name):
        self.name = name
        self.impulse = 0

    def set_impulse(self, impulse):
        # -1 -> backward
        # 0 -> stopped
        # 1 -> forward
        self.impulse = impulse

class MotorCortex:

    stepper_motors = [

        Stepper("tongue_stepper"),
        Stepper("jaw_stepper"),
        Stepper("left_ear_stepper"),
        Stepper("right_ear_stepper"),
        Stepper("tail_stepper"),
        Stepper("neck_stepper")

    ]

    msg = motor_cortex_msg()
    msg.stepper_motors = stepper_motors

    pub = rospy.Publisher('steppers', motor_cortex_msg, queue_size=10)

    def steppers_test(self):

        while not rospy.is_shutdown():
            rospy.init_node("motor_cortex", anonymous=True)
            rate = rospy.Rate(0.4)

            # random.randint(-1, 1)
            self.msg.stepper_motors[0].set_impulse(120)
            # self.msg.stepper_motors[1].set_impulse(random.randint(-1, 1))
            # self.msg.stepper_motors[2].set_impulse(random.randint(-1, 1))

            self.pub.publish(self.msg)

            rate.sleep()



if __name__ == '__main__':

    MotorCortex().steppers_test()
